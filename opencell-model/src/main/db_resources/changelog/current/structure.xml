<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.5.xsd">

    <changeSet id="#2406_20170731" author="AndriusKarpavicius">
        <dropColumn tableName="billing_billing_account" columnName="payment_method" />
    </changeSet>

    <changeSet id="#2781_20170810" author="anasseh">
        <modifyDataType tableName="ar_payment_token" columnName="info_1" newDataType="text" />
        <modifyDataType tableName="ar_payment_token" columnName="info_2" newDataType="text" />
        <modifyDataType tableName="ar_payment_token" columnName="info_3" newDataType="text" />
        <modifyDataType tableName="ar_payment_token" columnName="info_4" newDataType="text" />
        <modifyDataType tableName="ar_payment_token" columnName="info_5" newDataType="text" />
     </changeSet>
     
    <changeSet id="#2777_20170814" author="anasseh">
        <dropColumn tableName="ar_customer_account" columnName="mandate_date" />
        <dropColumn tableName="ar_customer_account" columnName="mandate_identification" />
        <dropColumn tableName="crm_customer" columnName="mandate_date" />
        <dropColumn tableName="crm_customer" columnName="mandate_identification" />        
        <addColumn tableName="ar_payment_token">
            <column name="mandate_date" type="date" />
            <column name="mandate_identification" type="varchar(255)" />            
        </addColumn>
    </changeSet>
    
    <changeSet id="#2741_20170816" author="EdwardLegaspi">
    	<addColumn tableName="billing_invoice_sub_cat">
    		<column name="tax_script_instance_id" type="bigint"></column>
    	</addColumn>
    	<addColumn tableName="billing_invoice_type">
    		<column name="tax_script_instance_id" type="bigint"></column>
    	</addColumn>
    </changeSet>
    
     <changeSet id="#2741_20170816 Convert InvoiceType to BusinessCFEntity" author="EdwardLegaspi">
     	<addColumn tableName="billing_invoice_type">
     		<column name="uuid" type="varchar(60)"></column>   
     	</addColumn>
     	<sql><![CDATA[update billing_invoice_type set uuid=concat('InvoiceType-',code)]]></sql>
     	<addNotNullConstraint tableName="billing_invoice_type" columnName="uuid"/>
     </changeSet>
     
</databaseChangeLog> 