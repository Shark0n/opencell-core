<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://xmlns.jcp.org/jsf/facelets" xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:hftl="http://hftl.org" xmlns:hf="http://xmlns.jcp.org/jsf/composite/tags" xmlns:of="http://omnifaces.org/functions" xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
    xmlns:p="http://primefaces.org/ui" template="/layout/template.xhtml">

    <ui:define name="metadata">
        <f:metadata>
            <f:viewParam name="objectId" value="#{sellerBean.objectId}" />
        </f:metadata>
    </ui:define>

    <ui:define name="body">
    
    	<hftl:entityPopup id="searchInvoiceSequencePopup" header="#{messages['invoiceType.invoiceSequence']}"
            updateField=":formInvoiceType:invoiceSequenceSelectedId :formInvoiceType:invoiceSequenceSelectedId_text" selection="#{invoiceTypeBean.entity.invoiceSequence}"
            backingBean="#{invoiceSequenceBean}" searchField1Label="#{messages['businessEntity.code']}" searchField1="code" column1Label="#{messages['businessEntity.code']}" column1="code"
            column2Label="#{messages['businessEntity.description']}" column2="description">
        </hftl:entityPopup>
        
        <h:form id="crumbmenuForm">
            <p:breadCrumb homeDisplay="text" id="crumbmenu">
                <p:menuitem value="#{messages['menu.configuration']}" disabled="true" />
                <p:menuitem outcome="sellers" value="#{messages['menu.sellers']}" />
                <p:menuitem value="#{messages['commons.new']} #{messages['seller']}" disabled="true" rendered="#{sellerBean.entity.transient}" />
                <p:menuitem value="#{messages['seller']} - #{sellerBean.entity.code}" disabled="true" rendered="#{!sellerBean.entity.transient}" />
            </p:breadCrumb>
        </h:form>

        <hftl:formPanel formId="sellerFormId" ajaxSubmit="true" submitPartialProcess=":sellerFormId:tabView" label="#{messages['seller.title']}" backingBean="#{sellerBean}">
            <p:tabView id="tabView">
                <p:tab title="#{messages['seller.tab.seller']}" id="tab0">
                    <hftl:formField label="#{messages['businessEntity.code']}" field="code" required="true" />
                    <hftl:formField label="#{messages['businessEntity.description']}" field="description" id="description" />
                    <hftl:formField id="trCurrencySelectId" label="#{messages['currency.codeCurrency']}" field="tradingCurrency" valueLabelField="currencyCode" listBean="#{tradingCurrencyBean}" />
                    <hftl:formField id="trCountrySelectId" label="#{messages['tradingCountry.tradingCountry']}" field="tradingCountry" valueLabelField="countryCode" listBean="#{tradingCountryBean}" />
                    <hftl:formField id="trLanguageSelectId" label="#{messages['tradingLanguage.tradingLanguage']}" field="tradingLanguage" valueLabelField="languageCode"
                        listBean="#{tradingLanguageBean}" />
                    <hftl:formField id="parentSelectId" label="#{messages['seller.parent']}" field="seller" valueLabelField="code" listBean="#{sellerBean}" listenerUpdate="@this" />

                    <h:panelGroup>
                        <p:dataTable id="sellerSequenceTable" width="80px;" label="#{messages['inboundRequest.responseHeaders']}" style="width:70%;" value="#{sellerBean.entity.invoiceTypeSequence}"
                            var="invoiceTypeSeq" paginator="false" resizableColumns="true">
                            <f:facet name="header">#{messages['seller.invoiceTypeSequences']}</f:facet>
                            <p:column headerText="#{messages['invoiceType.panel']}">
                                <h:outputText value="#{invoiceTypeSeq.invoiceType.descriptionAndCode}" />
                            </p:column>
                            <p:column headerText="#{messages['seller.invoiceSequence']}">
                                <h:outputText value="#{invoiceTypeSeq.invoiceSequence}" />
                            </p:column>
                            <p:column headerText="#{messages['invoiceType.sequence.prefixEl']}">
                                <h:outputText value="#{invoiceTypeSeq.prefixEL}" />
                            </p:column>
                            <p:column width="60px;" headerText="#{messages['commons.actions']}">
                                <p:commandButton action="#{sellerBean.getSequenceSelected(invoiceTypeSeq)}" update=":invoiceTypeSellerSequenceServiceDetails"
                                    icon="ui-icon-document" />
                                <p:commandButton action="#{sellerBean.deleteSellerSequence(invoiceTypeSeq.invoiceType)}" icon="ui-icon-trash" update="@form" />
                            </p:column>
                        </p:dataTable>
                        <p:commandButton value="#{messages['commons.addNew']}" update=" :sellerFormId:tabView:invoiceTypeSellerSequenceServiceDetails"
                            action="#{sellerBean.resetSequenceField}">
                        </p:commandButton>
                    </h:panelGroup>
                    
                    <h:panelGroup id="invoiceTypeSellerSequenceServiceDetails">
			        	 <p:panel header="#{messages['offerTemplate.serviceTemplate']}" rendered="#{sellerBean.selectedInvoiceTypeSellerSequence!=null}">
			                <p:outputPanel styleClass="form-panel-fields #{sellerBean.edit ? '' : ' form-panel-fields-view'}">
			                    
			                    <hftl:formField label="#{messages['invoiceType.invoiceSequence']}" id="invoiceSequenceSelectedId" field="invoiceSequence" valueLabelField="code" popup="true" popupId="searchInvoiceSequencePopup"
			                required="true" />
								<hftl:formField label="#{messages['invoiceType.sequence.prefixEl']}" field="prefixEl" required="true" />
			                   
			                </p:outputPanel>
			                <h:panelGroup layout="block" styleClass="form-panel-actions">
			                    <p:commandButton action="#{sellerBean.saveOrUpdateSequence}" value="#{messages['action.save']}" update="@form :sellerFormId:tabView:sellerSequenceTable :sellerFormId:messages" />
			                </h:panelGroup>
			        	</p:panel>
			        </h:panelGroup>

                </p:tab>
                
                <p:tab title="#{messages['seller.tab.information']}" id="tab1">
					<p:fieldset legend="#{messages['commons.contacts']}">
						<hftl:formField label="#{messages['contactInformation.email']}"
							field="contactInformation" childField="email" popup="false"
							required="false" id="email" validateEmail="true" />

						<hftl:formField label="#{messages['contactInformation.phone']}"
							field="contactInformation" childField="phone" maxlength="50" popup="false" />
						<hftl:formField label="#{messages['contactInformation.mobile']}"
							field="contactInformation" childField="mobile" maxlength="50" popup="false" />
					</p:fieldset>
					<p:fieldset legend="#{messages['commons.address']}">
						<hftl:formField label="#{messages['address.address1']}"
							field="address" id="address1" childField="address1"
							popup="false" />
						<hftl:formField label="#{messages['address.address2']}"
							field="address" id="address2" childField="address2"
							popup="false" />
						<hftl:formField label="#{messages['address.address3']}"
							field="address" id="address3" childField="address3"
							popup="false" />
						<hftl:formField label="#{messages['address.zipCode']}"
							id="zipCode" field="address" childField="zipCode"
							popup="false" newLine="true" />
						<hftl:formField label="#{messages['address.city']}" id="city"
							field="address" childField="city" popup="false" />
						<hftl:formField id="countryID" label="#{messages['address.country']}" fkToEntity="false" field="address" childField="country" valueLabelField="description" listBean="#{countryBean}"/>
					</p:fieldset>
				</p:tab>

                <hftl:customFields backingBean="#{sellerBean}" messagesId=":sellerFormId:messages" />

            </p:tabView>
        </hftl:formPanel>

    </ui:define>

</ui:composition>
